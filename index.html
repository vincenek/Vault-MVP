<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VALT | Autonomous Wealth Engine</title>
    <link href="https://unpkg.com/animate.css@4.1.1/animate.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #7FD8BE;
            --secondary: #5B6A9D;
            --accent: #FF6B6B;
            --background: #1A1F2B;
            --surface: #2A2F45;
            --text: #E0E9FF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', system-ui;
        }

        body {
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding: 2rem;
            min-height: 100vh;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            padding: 2rem 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientFlow 8s ease infinite;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .card {
            background: var(--surface);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .transaction-form {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        input, select {
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: var(--text);
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(127,216,190,0.2);
        }

        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            letter-spacing: 0.5px;
            transition: transform 0.3s ease;
        }

        button:hover {
            transform: scale(1.05);
        }

        .wallets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .wallet {
            position: relative;
            overflow: hidden;
            padding: 1.5rem;
            border-radius: 12px;
            background: linear-gradient(135deg, 
                rgba(127,216,190,0.15), 
                rgba(91,106,157,0.15));
        }

        .wallet::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255,255,255,0.1), 
                transparent);
            animation: walletGlow 4s linear infinite;
        }

        @keyframes walletGlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .chart-container {
            height: 300px;
            margin-top: 2rem;
        }

        .transaction-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 2rem;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            margin: 0.5rem 0;
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <header class="header animate__animated animate__fadeIn">
        <h1 style="font-size: 3rem; margin-bottom: 0.5rem;">VALT</h1>
        <p style="opacity: 0.8;">Autonomous Wealth Engine</p>
    </header>

    <main class="dashboard">
        <!-- Transaction Card -->
        <div class="card">
            <form id="transactionForm" class="transaction-form">
                <input type="number" id="amount" placeholder="Amount" step="0.01" required>
                <select id="category">
                    <option value="income">ðŸ’° Income</option>
                    <option value="groceries">ðŸ›’ Groceries</option>
                    <option value="entertainment">ðŸŽ‰ Entertainment</option>
                </select>
                <select id="emotion">
                    <option value="rational">ðŸ§  Rational</option>
                    <option value="emotional">ðŸ˜° Emotional</option>
                    <option value="impulsive">âš¡ Impulsive</option>
                </select>
                <button type="submit">Add Transaction â†’</button>
            </form>
        </div>

        <!-- Wallets -->
        <div class="wallets">
            <div class="wallet card">
                <h3>NOW Wallet</h3>
                <p id="nowBalance" style="font-size: 2rem; margin: 1rem 0;">$0.00</p>
                <div class="chart-container">
                    <canvas id="nowChart"></canvas>
                </div>
            </div>
            <div class="wallet card">
                <h3>SOON Wallet</h3>
                <p id="soonBalance" style="font-size: 2rem; margin: 1rem 0;">$0.00</p>
                <div class="chart-container">
                    <canvas id="soonChart"></canvas>
                </div>
            </div>
            <div class="wallet card">
                <h3>LATER Wallet</h3>
                <p id="laterBalance" style="font-size: 2rem; margin: 1rem 0;">$0.00</p>
                <div class="chart-container">
                    <canvas id="laterChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Analytics -->
        <div class="card" style="grid-column: 1 / -1;">
            <h3>Financial Pulse</h3>
            <div class="chart-container">
                <canvas id="mainChart"></canvas>
            </div>
        </div>

        <!-- Transaction History -->
        <div class="card" style="grid-column: 1 / -1;">
            <h3>Transaction Timeline</h3>
            <div class="transaction-list" id="transactionList"></div>
        </div>
    </main>

    <script>
        class ValtEngine {
            constructor() {
                this.transactions = JSON.parse(localStorage.getItem('valt_transactions')) || [];
                this.charts = {};
                this.initCharts();
                this.render();
            }

            initCharts() {
                const chartConfig = (wallet) => ({
                    type: 'line',
                    data: {
                        labels: Array(7).fill('').map((_,i) => `${i+1}d ago`),
                        datasets: [{
                            data: Array(7).fill(0),
                            borderColor: getComputedStyle(document.documentElement)
                                .getPropertyValue('--primary'),
                            tension: 0.4,
                            fill: true,
                            backgroundColor: 'rgba(127,216,190,0.05)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { x: { display: false }, y: { display: false } }
                    }
                });

                ['now', 'soon', 'later'].forEach(wallet => {
                    this.charts[wallet] = new Chart(
                        document.getElementById(`${wallet}Chart`),
                        chartConfig(wallet)
                    );
                });

                this.mainChart = new Chart(document.getElementById('mainChart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Now', 'Soon', 'Later'],
                        datasets: [{
                            data: [0, 0, 0],
                            backgroundColor: [
                                'rgba(127,216,190,0.8)',
                                'rgba(91,106,157,0.8)',
                                'rgba(255,107,107,0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { position: 'bottom' },
                            title: { display: true, text: 'Wealth Distribution' }
                        }
                    }
                });
            }

            addTransaction(transaction) {
                transaction.timestamp = new Date().toISOString();
                transaction.wallet = this.classifyWallet(transaction);
                this.transactions.push(transaction);
                this.save();
                this.render();
            }

            classifyWallet({ amount, category }) {
                if (category === 'income') return 'later';
                return amount > 100 ? 'soon' : 'now';
            }

            save() {
                localStorage.setItem('valt_transactions', JSON.stringify(this.transactions));
            }

            render() {
                this.renderBalances();
                this.renderCharts();
                this.renderTransactions();
            }

            renderBalances() {
                const balances = this.transactions.reduce((acc, t) => {
                    const modifier = t.category === 'income' ? +t.amount : -t.amount;
                    acc[t.wallet] = (acc[t.wallet] || 0) + modifier;
                    return acc;
                }, {});

                document.getElementById('nowBalance').textContent = 
                    `$${(balances.now || 0).toFixed(2)}`;
                document.getElementById('soonBalance').textContent = 
                    `$${(balances.soon || 0).toFixed(2)}`;
                document.getElementById('laterBalance').textContent = 
                    `$${(balances.later || 0).toFixed(2)}`;

                this.mainChart.data.datasets[0].data = [
                    balances.now || 0,
                    balances.soon || 0,
                    balances.later || 0
                ];
                this.mainChart.update();
            }

            renderCharts() {
                ['now', 'soon', 'later'].forEach(wallet => {
                    const walletData = Array(7).fill(0).map((_,i) => {
                        const date = new Date();
                        date.setDate(date.getDate() - (6 - i));
                        return this.transactions
                            .filter(t => new Date(t.timestamp).toDateString() === date.toDateString())
                            .filter(t => t.wallet === wallet)
                            .reduce((sum, t) => sum + (t.category === 'income' ? t.amount : -t.amount), 0);
                    });
                    
                    this.charts[wallet].data.datasets[0].data = walletData;
                    this.charts[wallet].update();
                });
            }

            renderTransactions() {
                const list = document.getElementById('transactionList');
                list.innerHTML = this.transactions.slice(-10).reverse().map(t => `
                    <div class="transaction-item">
                        <div>
                            <span style="opacity:0.7">${new Date(t.timestamp).toLocaleDateString()}</span>
                            <strong>${t.category}</strong>
                        </div>
                        <div style="color: ${t.category === 'income' ? 'var(--primary)' : 'var(--accent)'}">
                            ${t.category === 'income' ? '+' : '-'}$${Math.abs(t.amount).toFixed(2)}
                        </div>
                    </div>
                `).join('');
            }
        }

        const valt = new ValtEngine();
        
        document.getElementById('transactionForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('amount').value);
            if (!amount || amount <= 0) return;
            
            valt.addTransaction({
                amount,
                category: document.getElementById('category').value,
                emotion: document.getElementById('emotion').value
            });
            e.target.reset();
        });
    </script>
</body>
</html>
